{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/index.ts","webpack:///./src/engine/index.ts","webpack:///(webpack)/buildin/global.js","webpack:///./src/engine/types.ts","webpack:///./src/engine/input.ts","webpack:///./src/engine/component.ts","webpack:///./src/engine/scene.ts","webpack:///./node_modules/timers-browserify/main.js","webpack:///./node_modules/setimmediate/setImmediate.js","webpack:///./node_modules/process/browser.js","webpack:///./src/game/index.ts","webpack:///./src/game/snake.ts","webpack:///./src/game/food.ts","webpack:///./src/styles/index.css?3a5d","webpack:///./src/styles/index.css","webpack:///./node_modules/css-loader/dist/runtime/api.js","webpack:///./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","startGame","MainScene","destroy","Scene","strokeColor","Colors","BLACK","snake","Snake","addComponent","foodSpawner","FoodSpawner","update","start","document","getElementById","onclick","Input","GameComponent","g","this","Function","e","window","Keys","keys","addEventListener","keyCode","keyPressed","InputManager","id","draw","canvasCtx","width","height","color","fill","stroke","components","_framerate","_clear","context","fillStyle","strokeStyle","fillRect","strokeRect","canvas","createElement","getContext","Error","framerate","interval","clearInterval","setInterval","frameStep","component","getComponent","canvasBody","appendChild","remove","forEach","k","self","apply","Timeout","clearFn","_id","_clearFn","setTimeout","scope","arguments","clearTimeout","timeout","close","unref","ref","enroll","item","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","active","_onTimeout","setImmediate","global","clearImmediate","registerImmediate","html","channel","messagePrefix","onGlobalMessage","nextHandle","tasksByHandle","currentlyRunningATask","doc","attachTo","getPrototypeOf","toString","process","handle","nextTick","runIfPresent","postMessage","importScripts","postMessageIsAsynchronous","oldOnMessage","onmessage","canUsePostMessage","MessageChannel","port1","event","data","port2","documentElement","script","onreadystatechange","removeChild","Math","random","source","indexOf","slice","length","attachEvent","callback","args","Array","task","undefined","run","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","currentQueue","queue","draining","queueIndex","cleanUpNextTick","concat","drainQueue","len","marker","runClearTimeout","Item","array","noop","push","title","browser","env","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","startingParts","partWidth","score","crashed","YELLOW_GREEN","bodyParts","velocity","x","y","updateScore","checkCrash","splice","getInput","move","didEat","foodSpawned","pop","index","PINK","beginPath","arc","PI","newHead","unshift","amount","innerHTML","String","head","some","part","foodX","foodY","movingX","movingY","UP","DOWN","LEFT","RIGHT","Food","generatePosition","isOnSnake","parts","randomCoordinate","pw","min","max","snakePartWidth","round","position","content","options","locals","useSourceMap","list","map","cssMapping","btoa","sourceMapping","sourceMap","base64","unescape","encodeURIComponent","JSON","stringify","sourceURLs","sources","sourceRoot","join","cssWithMappingToString","mediaQuery","alreadyImportedModules","_i","memo","stylesInDom","isOldIE","Boolean","all","atob","getTarget","target","styleTarget","querySelector","HTMLIFrameElement","contentDocument","listToStyles","styles","newStyles","base","css","media","addStylesToDom","domStyle","j","refs","addStyle","insertStyleElement","style","attributes","nonce","setAttribute","insert","textStore","replaceText","replacement","filter","applyToSingletonTag","obj","styleSheet","cssText","cssNode","createTextNode","childNodes","insertBefore","singleton","singletonCounter","styleIndex","firstChild","parentNode","removeStyleElement","newObj","newList","mayRemove","_domStyle"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","import { Scene } from './engine';\r\nimport { Colors } from './engine/types';\r\nimport { FoodSpawner, Snake } from './game';\r\nimport './styles/index.css';\r\n\r\nexport let MainScene: Scene;\r\n\r\ndocument.getElementById('retry')!.onclick = () => {\r\n    startGame();\r\n}\r\n\r\nexport function startGame() {\r\n    if (MainScene) {\r\n        MainScene.destroy();\r\n    }\r\n    MainScene = new Scene(400, 400);\r\n    MainScene.strokeColor = Colors.BLACK;\r\n\r\n    const snake = new Snake(5, 15);\r\n    MainScene.addComponent(snake);\r\n\r\n    const foodSpawner = new FoodSpawner();\r\n    foodSpawner.update();\r\n    MainScene.addComponent(foodSpawner);\r\n\r\n    MainScene.start(10);\r\n}\r\n\r\nstartGame();","export { Input } from './input';\nexport { GameComponent } from './component';\nexport { Scene } from './scene';","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","/**\n * Color to use when rendering a shape\n */\nexport type Color = {\n    fill: string;\n    stroke: string;\n}\n\n/**\n * A point in 2D\n */\nexport type Point = {\n    x: number;\n    y: number;\n}\n\n/**\n * Color constants\n */\nexport enum Colors {\n    BLACK = 'black',\n    PINK = 'pink',\n    RED = 'red',\n    YELLOW = 'yellow',\n    YELLOW_GREEN = 'yellowgreen'\n}\n\n/**\n * Keyboard constants\n */\nexport enum Keys {\n    /** Up arrow key */\n    UP = 38,\n\n    /** Down arrow key */\n    DOWN = 40,\n\n    /** Left arrow key */\n    LEFT = 37,\n\n    /** Right arrow key */\n    RIGHT = 39,\n\n    W = 87,\n    A = 65,\n    S = 83,\n    D = 68\n}\n\n","import { Keys } from \"./types\";\n\n/**\n * Manages input events\n */\nclass InputManager {\n    private keys: boolean[] = [];\n\n    constructor() {\n        window.addEventListener('keydown', e => this.keys[e.keyCode] = true);\n        window.addEventListener('keyup', e => this.keys[e.keyCode] = false);\n    }\n\n    /**\n     * Check whether a key is pressed or not\n     * @param key\n     * @returns true if a key is being pressed\n     */\n    public keyPressed(key: Keys | number): boolean {\n        return this.keys[key];\n    }\n}\n\nexport const Input = new InputManager();","/**\n * Container for adding a component to a game's scene\n */\nexport class GameComponent {\n    public readonly id: string;\n\n    constructor(id: string) {\n        this.id = id;\n    }\n\n    // GameComponents don't have to be smart or visible\n\n    /** Called each frame. Reserved for the main logic of the component */\n    public update() {}\n\n    /** Called each frame. Reserved for drawing the component in a scene */\n    public draw(canvasCtx: CanvasRenderingContext2D) {}\n}","import { Color, Colors } from './types';\nimport { GameComponent } from './component';\nimport { setInterval, clearInterval } from 'timers';\n\n/**\n * Object for managing GameComponents and the canvas\n */\nexport class Scene {\n    private canvas: HTMLCanvasElement;\n    private context: CanvasRenderingContext2D;\n    private color: Color = { fill: 'white', stroke: 'white' };\n    private components: { [key: string]: GameComponent } = {};\n    private interval?: NodeJS.Timeout;\n    private _framerate: number = 60;\n\n    constructor(width: number, height: number) {\n        this.canvas = document.createElement(\"canvas\");\n        this.canvas.width = width;\n        this.canvas.height = height;\n\n        const context = this.canvas.getContext('2d');\n        if (!context) {\n            throw new Error('Error getting canvas context');\n        }\n        this.context = context;\n    }\n\n    get width() {\n        return this.canvas.width;\n    }\n\n    get height() {\n        return this.canvas.height;\n    }\n\n    /** Frames to render per second */\n    get framerate(): number {\n        return this._framerate;\n    }\n\n    set framerate(framerate: number) {\n        if (this.interval) {\n            clearInterval(this.interval)\n        }\n        if (framerate > 0) {\n            this.interval = setInterval(() => { this.frameStep() }, 1000 / framerate)\n        }\n        this._framerate = framerate;\n    }\n\n    /** Border color of scene */\n    set strokeColor(color: Colors | string) {\n        this.color.stroke = color;\n    }\n\n    /** Background color of scene */\n    set fillColor(color: Colors | string) {\n        this.color.fill = color;\n    }\n\n    /**\n     * Add a game component to the scene\n     * @param component \n     */\n    public addComponent(component: GameComponent): void {\n        this.components[component.id] = component;\n    }\n\n    /**\n     * Returns a GameComponent from the scene with the given id.\n     * @param id of GameComponent\n     */\n    public getComponent(id: string): GameComponent {\n        const component = this.components[id];\n        if (!component) {\n            throw new Error(`GameComponent with id ${id} does not exist`);\n        }\n        return component;\n    }\n\n    /**\n     * Begin rendering scene\n     * @param framerate of scene\n     */\n    public start(framerate: number) {\n        const canvasBody = document.getElementById('canvasBody');\n        if (!canvasBody) {\n            throw new Error('Missing canvasBody element to attach canvas to');\n        }\n        canvasBody.appendChild(this.canvas);\n        this.framerate = framerate;\n    }\n\n    /**\n     * Stop the scene from rendering and destroy canvas element\n     */\n    public destroy() {\n        this.framerate = 0;\n        this.canvas.remove();\n    }\n    \n    /**\n     * Update and draw every GameComponent in the scene\n     */\n    private frameStep() {\n        this._clear();\n        Object.keys(this.components).forEach(k => {\n            this.components[k].update();\n            this.components[k].draw(this.context);\n        });\n    }\n\n    private _clear = () => {\n        const { width, height } = this.canvas;\n        this.context.fillStyle = this.color.fill;\n        this.context.strokeStyle = this.color.stroke;\n        this.context.fillRect(0, 0, width, height);\n        this.context.strokeRect(0, 0, width, height);\n    }\n}","var scope = (typeof global !== \"undefined\" && global) ||\n            (typeof self !== \"undefined\" && self) ||\n            window;\nvar apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(scope, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\nrequire(\"setimmediate\");\n// On some exotic environments, it's not clear which object `setimmediate` was\n// able to install onto.  Search each possibility in the same order as the\n// `setimmediate` library.\nexports.setImmediate = (typeof self !== \"undefined\" && self.setImmediate) ||\n                       (typeof global !== \"undefined\" && global.setImmediate) ||\n                       (this && this.setImmediate);\nexports.clearImmediate = (typeof self !== \"undefined\" && self.clearImmediate) ||\n                         (typeof global !== \"undefined\" && global.clearImmediate) ||\n                         (this && this.clearImmediate);\n","(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 6–8\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","export { Snake } from './snake';\nexport { FoodSpawner } from './food';","import { Colors, Point, Color, Keys } from \"../engine/types\";\r\nimport { GameComponent, Input } from \"../engine\";\r\nimport { FoodSpawner, Food } from \"./food\";\r\nimport { MainScene } from '..';\r\n\r\n/**\r\n * The star of the show and player character\r\n */\r\nexport class Snake extends GameComponent {\r\n    private bodyParts: Point[];\r\n    private velocity: Point;\r\n    private score: number = 0;\r\n    private crashed: boolean = false;\r\n    private color: Color = {\r\n        fill: Colors.YELLOW_GREEN,\r\n        stroke: Colors.BLACK\r\n    };\r\n    public readonly partWidth: number;\r\n\r\n    constructor(startingParts: number, partWidth: number) {\r\n        super('snake');\r\n        this.partWidth = partWidth;\r\n        this.bodyParts = [];\r\n        this.velocity = { x: partWidth, y: 0 };\r\n        for (let i = 0; i < startingParts; i++) {\r\n            this.bodyParts.push({ x: 150 - (i * partWidth), y: 150 });\r\n        }\r\n\r\n        // force refresh score in case retry button was hit\r\n        this.updateScore(0);\r\n    }\r\n\r\n    /** Parts of the snake */\r\n    get parts() { return this.bodyParts; }\r\n\r\n    public update() {\r\n        if (this.checkCrash()) {\r\n            // stop the snake\r\n            this.crashed = true;\r\n            this.velocity = { x: 0, y: 0 };\r\n            MainScene.framerate += 2;   // make crash anim faster\r\n        }\r\n\r\n        if (this.crashed) {\r\n            // crash animation\r\n            if (this.bodyParts.length > 0) {\r\n                this.bodyParts.splice(0, 1);\r\n            } else {\r\n                MainScene.framerate = 0;\r\n            }\r\n        } else {\r\n            this.getInput();\r\n            this.move();\r\n            if (this.didEat()) {\r\n                const foodSpawner = MainScene.getComponent('foodSpawner') as FoodSpawner;\r\n                foodSpawner.foodSpawned = false;\r\n                this.updateScore();\r\n            } else {\r\n                this.bodyParts.pop();\r\n            }\r\n        }\r\n    }\r\n\r\n    public draw(canvasCtx: CanvasRenderingContext2D) {\r\n        canvasCtx.strokeStyle = this.color.stroke;\r\n        this.bodyParts.forEach(({ x, y }, index) => {\r\n            canvasCtx.fillStyle = index === 0 && !this.crashed ? Colors.PINK : this.color.fill;\r\n            canvasCtx.beginPath();\r\n            canvasCtx.arc(x, y, this.partWidth / 2, 0, 2*Math.PI);\r\n            canvasCtx.fill();\r\n            canvasCtx.stroke();\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Move snake. If it passes a scene boundary, wrap around to\r\n     * the other side\r\n     */\r\n    private move() {\r\n        const newHead: Point = {\r\n            x: this.bodyParts[0].x + this.velocity.x,\r\n            y: this.bodyParts[0].y + this.velocity.y\r\n        };\r\n        if (newHead.x > MainScene.width) {\r\n            newHead.x = 0;\r\n        } else if (newHead.x < 0) {\r\n            newHead.x = MainScene.width - (MainScene.width % this.partWidth);\r\n        } else if (newHead.y > MainScene.height) {\r\n            newHead.y = 0;\r\n        } else if (newHead.y < 0) {\r\n            newHead.y = MainScene.height - (MainScene.height % this.partWidth);\r\n        }\r\n        this.bodyParts.unshift(newHead);\r\n    }\r\n\r\n    /**\r\n     * Update player score by given amount, otherwise by 1\r\n     * @param amount to update score by\r\n     */\r\n    private updateScore(amount: number = 1): void {\r\n        this.score += amount;\r\n        const score = document.getElementById('score');\r\n        if (score) {\r\n            score.innerHTML = `Score: ${String(this.score)}`;\r\n        }\r\n\r\n        // increase speed of game after every 3 food pellets\r\n        if (this.score % 3 === 0 && this.score > 0) {\r\n            MainScene.framerate += 0.2;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Check if snake crashed into itself\r\n     * @returns true if snake crashed\r\n     */\r\n    private checkCrash(): boolean {\r\n        const head = this.bodyParts[0];\r\n        return this.bodyParts.slice(1).some(\r\n            part => head.x === part.x && head.y === part.y\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Check if snake ate a food pellet\r\n     * @returns true if snake ate food\r\n     */\r\n    private didEat(): boolean {\r\n        const { x: foodX, y: foodY } = (MainScene.getComponent('food') as Food).position;\r\n        return this.bodyParts[0].x === foodX && this.bodyParts[0].y === foodY;\r\n    }\r\n\r\n    /**\r\n     * Read keyboard input and change snake velocity based on it\r\n     */\r\n    private getInput(): void {\r\n        const { x: dx, y: dy } = this.velocity;\r\n        const movingX = dx !== 0;\r\n        const movingY = dy !== 0;\r\n        if (Input.keyPressed(Keys.UP) && !movingY) {\r\n            this.velocity = { x: 0, y: -this.partWidth };\r\n        } else if (Input.keyPressed(Keys.DOWN) && !movingY) {\r\n            this.velocity = { x: 0, y: this.partWidth };\r\n        } else if (Input.keyPressed(Keys.LEFT) && !movingX) {\r\n            this.velocity = { x: -this.partWidth, y: 0 };\r\n        } else if (Input.keyPressed(Keys.RIGHT) && !movingX) {\r\n            this.velocity = { x: this.partWidth, y: 0 };\r\n        }\r\n    }\r\n}","import { GameComponent } from '../engine';\r\nimport { Snake } from './snake';\r\nimport { Point } from '../engine/types';\r\nimport { MainScene } from '..';\r\n\r\n/**\r\n * A meta component responsible for spawning snake food\r\n */\r\nexport class FoodSpawner extends GameComponent {\r\n    public foodSpawned: boolean = false;\r\n\r\n    constructor() {\r\n        super('foodSpawner');\r\n    }\r\n\r\n    public update() {\r\n        if (!this.foodSpawned) {\r\n            MainScene.addComponent(\r\n                new Food(this.generatePosition())\r\n            );\r\n            this.foodSpawned = true;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Randomly generate a position for food pellet\r\n     */\r\n    private generatePosition(): Point {\r\n        let x = 0;\r\n        let y = 0;\r\n        let isOnSnake = true;\r\n        const { parts, partWidth: pw } = MainScene.getComponent('snake') as Snake;\r\n        while (isOnSnake) {\r\n            x = this.randomCoordinate(0, MainScene.width - pw, pw);\r\n            y = this.randomCoordinate(0, MainScene.height - pw, pw);\r\n            isOnSnake = parts.some(\r\n                (part: Point) => part.x === x && part.y === y\r\n            );\r\n            if (!isOnSnake) {\r\n                break;\r\n            }\r\n        }\r\n        return { x, y };\r\n    }\r\n\r\n    private randomCoordinate(min: number, max: number, snakePartWidth: number): number {\r\n        return Math.round((Math.random() * (max - min) + min) / snakePartWidth) * snakePartWidth;\r\n    }\r\n}\r\n\r\n/**\r\n * A food pellet for snake\r\n */\r\nexport class Food extends GameComponent {\r\n    public position: Point;\r\n    \r\n    constructor(position: Point) {\r\n        super('food');\r\n        this.position = position;\r\n    }\r\n\r\n    public draw(canvasCtx: CanvasRenderingContext2D) {\r\n        const { partWidth } = MainScene.getComponent('snake') as Snake;\r\n        const { x, y } = this.position;\r\n        canvasCtx.fillStyle = 'yellow';\r\n        canvasCtx.strokeStyle = 'black';\r\n        canvasCtx.beginPath();\r\n        canvasCtx.arc(x, y, (partWidth / 2) - 2, 0, 2*Math.PI);\r\n        canvasCtx.fill();\r\n        canvasCtx.stroke();\r\n    }\r\n}","var content = require(\"!!../../node_modules/css-loader/dist/cjs.js!./index.css\");\n\nif (typeof content === 'string') {\n  content = [[module.id, content, '']];\n}\n\nvar options = {}\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = require(\"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\")(content, options);\n\nif (content.locals) {\n  module.exports = content.locals;\n}\n","exports = module.exports = require(\"../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \"body {\\n    text-align: center;\\n    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\\n}\\n\\ncanvas {\\n    padding: 10px;\\n    border-radius: 29px;\\n    background-color: #505050;\\n}\\n\\n.game-body {\\n    margin: 0;\\n    position: absolute;\\n    top: 40%;\\n    left: 50%;\\n    transform: translate(-50%, -50%);\\n}\\n\\n.game-body__row {\\n    margin-bottom: 10px;\\n}\\n\\n.game-title {\\n    font-size: 50px;\\n    font-weight: bold;\\n}\\n\\n#score {\\n    font-size: 24px;\\n}\\n\\n#retry {\\n    padding: 10px 26px;\\n    background-color: #505050;\\n    color: white;\\n    border-radius: 4px;\\n    cursor: pointer;\\n    font-size: 18px;\\n    outline: #77cbf3;\\n}\\n\\n#retry:hover {\\n    border-color: #77cbf3;\\n}\", \"\"]);\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \"{\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join('');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery) {\n    if (typeof modules === 'string') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    for (var i = 0; i < this.length; i++) {\n      // eslint-disable-next-line prefer-destructuring\n      var id = this[i][0];\n\n      if (id != null) {\n        alreadyImportedModules[id] = true;\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = modules[_i]; // skip already imported module\n      // this implementation is not 100% perfect for weird media query combinations\n      // when a module is imported multiple times with different media queries.\n      // I hope this will never occur (Hey this way we have smaller bundles)\n\n      if (item[0] == null || !alreadyImportedModules[item[0]]) {\n        if (mediaQuery && !item[2]) {\n          item[2] = mediaQuery;\n        } else if (mediaQuery) {\n          item[2] = \"(\".concat(item[2], \") and (\").concat(mediaQuery, \")\");\n        }\n\n        list.push(item);\n      }\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring\n\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot).concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n  return \"/*# \".concat(data, \" */\");\n}","\"use strict\";\n\nvar stylesInDom = {};\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nfunction listToStyles(list, options) {\n  var styles = [];\n  var newStyles = {};\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var css = item[1];\n    var media = item[2];\n    var sourceMap = item[3];\n    var part = {\n      css: css,\n      media: media,\n      sourceMap: sourceMap\n    };\n\n    if (!newStyles[id]) {\n      styles.push(newStyles[id] = {\n        id: id,\n        parts: [part]\n      });\n    } else {\n      newStyles[id].parts.push(part);\n    }\n  }\n\n  return styles;\n}\n\nfunction addStylesToDom(styles, options) {\n  for (var i = 0; i < styles.length; i++) {\n    var item = styles[i];\n    var domStyle = stylesInDom[item.id];\n    var j = 0;\n\n    if (domStyle) {\n      domStyle.refs++;\n\n      for (; j < domStyle.parts.length; j++) {\n        domStyle.parts[j](item.parts[j]);\n      }\n\n      for (; j < item.parts.length; j++) {\n        domStyle.parts.push(addStyle(item.parts[j], options));\n      }\n    } else {\n      var parts = [];\n\n      for (; j < item.parts.length; j++) {\n        parts.push(addStyle(item.parts[j], options));\n      }\n\n      stylesInDom[item.id] = {\n        id: item.id,\n        refs: 1,\n        parts: parts\n      };\n    }\n  }\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n\n  if (typeof options.attributes.nonce === 'undefined') {\n    var nonce = typeof __webpack_nonce__ !== 'undefined' ? __webpack_nonce__ : null;\n\n    if (nonce) {\n      options.attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(options.attributes).forEach(function (key) {\n    style.setAttribute(key, options.attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  }\n\n  if (sourceMap && btoa) {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (list, options) {\n  options = options || {};\n  options.attributes = typeof options.attributes === 'object' ? options.attributes : {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  var styles = listToStyles(list, options);\n  addStylesToDom(styles, options);\n  return function update(newList) {\n    var mayRemove = [];\n\n    for (var i = 0; i < styles.length; i++) {\n      var item = styles[i];\n      var domStyle = stylesInDom[item.id];\n\n      if (domStyle) {\n        domStyle.refs--;\n        mayRemove.push(domStyle);\n      }\n    }\n\n    if (newList) {\n      var newStyles = listToStyles(newList, options);\n      addStylesToDom(newStyles, options);\n    }\n\n    for (var _i = 0; _i < mayRemove.length; _i++) {\n      var _domStyle = mayRemove[_i];\n\n      if (_domStyle.refs === 0) {\n        for (var j = 0; j < _domStyle.parts.length; j++) {\n          _domStyle.parts[j]();\n        }\n\n        delete stylesInDom[_domStyle.id];\n      }\n    }\n  };\n};"],"sourceRoot":""}